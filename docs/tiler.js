!function(){"use strict";if(!window.Tiler){var a=function(a,b){var c={};for(var d in a)c[d]=a[d];if(!b)return c;for(d in b)c[d]=b[d];return c},b=function(a,c){return c?b(c,a%c):a},c=function(a,b){for(var c in b)a.style[c]=b[c]};window.Tiler=function(d,e){var f,g=this,h=0,i={},j=0,k=0,l=0,m=0,n=null,o=0,p={zoom:!1,constrain:!1,root:document.body,displayDelay:25,autoStart:!0,scale:1,interval:1e3,events:{click:function(a){},flip:function(a,b){}}};if(d=a(p,d),this.interval=d.interval,this.timeout=null,this.events=d.events,this.data=d.data,this.hovered=-1,f=d.root?d.root instanceof HTMLElement?d.root:document.querySelector(d.root):document.body,!f)throw Error("Invalid Tiler root ["+d.root+"]");if(!this.data||0==this.data.length)throw Error("No data for Tiler ["+d.root+"]");for(this.root=f,d.zoom&&this.root.classList.add("zoom"),this.root.addEventListener("mouseleave",function(a){g.hovered=-1}),this.root.innerHTML="",i=window.getComputedStyle(f),j=parseInt(i.width),k=parseInt(i.height),l=b(j,k)/d.scale,m=j*k/l/l,this.tilesPerRow=0,h=0;h<m;h++)n=document.createElement("div"),n.className="container off",n.setAttribute("data-tiler",h),n.addEventListener("mouseenter",function(a){g.hovered=a.target.getAttribute("data-tiler")}),d.constrain&&d.zoom&&(0===h?n.className+=" topleft":h===m-1?n.className+=" bottomright":h===j/l-1?(n.className+=" topright",this.tilesPerRow=h+1):h%(j/l)===0&&m-h==j/l?n.className+=" bottomleft":h<j/l?n.className+=" top":h>m-1-j/l?n.className+=" bottom":h%(j/l)===0?n.className+=" left":h%(j/l)===j/l-1&&(n.className+=" right")),n.innerHTML='<div class="tile"><section class="front"><figure></figure></section><section class="back"><figure></figure></section>',c(n,{width:l+"px",height:l+"px"}),o=Math.floor(Math.random()*this.data.length),n.querySelector(".front figure").className=this.data[o],o=Math.floor(Math.random()*this.data.length),n.querySelector(".back figure").className=this.data[o],this.root.appendChild(n),window.setTimeout(function(){this.classList.remove("off")}.bind(n),h*d.displayDelay);this.root.addEventListener("click",function(a){g.events&&g.events.on&&g.events.click(a.target.className)}),d.autoStart&&window.setTimeout(function(){arguments[0].toggle()},this.interval+d.displayDelay*m,this)},window.Tiler.prototype.flip=function(){var a=this.root.querySelectorAll(".tile"),b=Math.floor(Math.random()*a.length),c=Math.floor(Math.random()*this.data.length),d=a[b].classList.contains("flipped"),e=d?".back figure":".front figure",f=d?".front figure":".back figure",g=this.data[c];this.hovered&&console.log("hovered:"+this.hovered),this.events&&this.events.flip&&this.events.flip(a[b].querySelector(e).className,g),a[b].querySelector(f).className=g,a[b].classList.toggle("flipped")},window.Tiler.prototype.stop=function(){this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)},window.Tiler.prototype.start=function(){this.timeout||(this.root.classList.contains("init")||this.root.classList.add("init"),this.flip(),this.timeout=window.setInterval(function(){var a=arguments[0];a.flip()},this.interval,this))},window.Tiler.prototype.toggle=function(){this.timeout?this.stop():this.start()},window.Tiler.prototype.destroy=function(){this.stop(),this.root.innerHTML="",this.root=null,this.events=null,this.data=null},window.Tiler.prototype.toString=function(){return"Tiler "+JSON.stringify({root:""+this.root,delay:this.interval,data:this.data})}}}();